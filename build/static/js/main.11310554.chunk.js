(this["webpackJsonptwilio-video-app-react"]=this["webpackJsonptwilio-video-app-react"]||[]).push([[0],{158:function(e){e.exports=JSON.parse('{"a":"0.1.0"}')},164:function(e,t){e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAZIAAAEyCAYAAADQnlYUAAAABmJLR0QA/wD/AP+gvaeTAAAACXBIWXMAAAsTAAALEwEAmpwYAAAFdElEQVR42u3dwW3DUAxEQSnI2a2oCxXtLtyKGlB68BrZMH+mAoGH/8CLuF/HeW8AC3u8nrspvO/LCAAQEgAqruO8hQSAtyNiIwEgioiQABBFREgAiCIiJABEERESAKKICAkAUUSEBIAoIkICQBQRIQEgioiQABBFREgAiCIiJABEERESAKKICAkAW3rg8PuTH+PKGDDl8eNzc7SRAIiIkADQ2+iEBEBEhASATkSEBEBEhASAXkSEBEBEhASAXkSEBEBEhASAXkSEBEBEhASAXkSEBEBEhASA7t+QhQRARIQEQESEBICBERESABEREgARERIAhkZESABEREgARERIABgaESEBEBEhARARIQFgaESEBEBEhARARIQEgKERERKARSPyeD13IQEQkXpEhARARIQEQER6ERESABEREgAR6UVESABEREgARKQXESEBEBEhARCRXkSEBEBEhARARHoRERIAERESABHpRURIAERESABEREgARGRoRIQEQESEBEBEhARARIZGREgARERIAERESABEZGhEhARARIQEQESEBEBEhkZESABEREgARERIAERkaESEBEBEhARARIQEQESEBEBEVoyIkACIiJAATPLfIiIkACIiJAAiIiQAIiIkAKwYESEBEBEhARARIQEQESEBYMWICAmAiAgJgIgICYCICAmAiAgJACIiJAAiIiQAIiIkACIiJACIiJAAiIiQAIiIkACIiJAAiAhCAiAiQgIgIkICICJCAiAiCAmAiAgJgIgICYCICAmAiAgJgIggJAAiIiQAIiIkACIiJAAigpAAiIiQAIiIkACIiJAAiAhCAogIQgIgIkICICJCAiAiCAkgIggJgIj8Fd9GAAgINhIAhAQAIQFASABASAAQEgCEBAAhAQAhAUBIABASAIQEAIQEACEBQEgAEBIAEBIAhAQAIQFASAAQEgAQEgCEBAAhAUBIAEBIABASAIQEACEBACEBQEgAEBIAhAQAhAQAIQFASAAQEgCEBACEBAAhAUBIABASABASAIQEACEBQEgAQEgAEBIAhAQAIQEAIQFASAAQEoDQdZz3dZy3SQgJQBwUUxASADEREgAxERIAMUFIADEREyEBEBMhARATIQEQE4QEQEyEBEBMhARATIQEQEwQEgAxERIAMRESADEREgAxQUgAxERIAMRESADEREgAxERIABATIQEQEyEBEBMhARATIQFATIQEQEyEBEBMhARATIQEADEREgAxERIAMRESADEREgDEREgAxERIAMRESADEREgAWDsmQgIgJkICICZCAiAmQgLAijEREgAxERIAMRESADEREgBWjImQAGzb9ng9dzEREgAxERIAMRESADFZKiZCAiAmQgIgJkICICZDYyIkAGIiJABiIiQAYjI0JkICICZCAiAmQgIgJkNjIiQAYiIkAGIiJABiMjQmQgIgJkICICZCAiAmQ2MiJABiIiQAYtKLiZAAiImQAIhJLyZCAiAmQgIgJr2YCAmAmAgJgJj0YiIkAGIiJABi0ouJkACIiZAAiEkvJkICICZCAiAmvZgICcCiMRESADEREgDmx0RIAMRESADEREgAGBoTIQEQEyEBEBMhAWBoTIQEQEyEBEBMhASAoTEREgAxERIAMRESAIbGREgAxERIAOjFREgAxERIAOjFREgAxERIAOjFREgAxERIAOjFREgAxERIAOjFREgAxERIAOjFREgAxERIAOjFZL+O8zZOwKP6926h/5a0AzYSABGNIiokAEQxERIAopgICQBRTIQEgCgmQgJAFBMhASCKiZAAEMVESACIYiIkAEQxERIAopgICQBRTIQEgCgmQgJAFBMhASCKiZAAEMVESACI/ACDMI238rqCJQAAAABJRU5ErkJggg=="},183:function(e,t,n){e.exports=n(305)},305:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),c=n(13),i=n.n(c),o=n(357),l=n(355),u=n(362),s=n(146),d=n(361),f=n(3),E=n(151),m=n.n(E),A=n(344),b=n(363),p=n(6),h=Object(a.createContext)(null);function g(){var e=Object(a.useContext)(h),t=Object(p.a)(e,2);return[t[0],t[1]]}function v(e){var t=e.room,n=e.children,c=Object(a.useState)(null),i=Object(p.a)(c,2),o=i[0],l=i[1];return Object(a.useEffect)((function(){var e=function(){return l(null)};return t.on("disconnected",e),function(){t.off("disconnected",e)}}),[t]),r.a.createElement(h.Provider,{value:[o,function(e){return l((function(t){return t===e?null:e}))}]},n)}var O=n(33),j=n.n(O);function I(){var e=function(){var e=Object(a.useState)(),t=Object(p.a)(e,2),n=t[0],r=t[1];return Object(a.useEffect)((function(){j.a.createLocalAudioTrack().then((function(e){r(e)}))}),[]),Object(a.useEffect)((function(){var e=function(){return r(void 0)};if(n)return n.on("stopped",e),function(){n.off("stopped",e)}}),[n]),n}(),t=function(){var e=Object(a.useState)(),t=Object(p.a)(e,2),n=t[0],r=t[1],c=Object(a.useCallback)((function(){return j.a.createLocalVideoTrack({frameRate:24,height:720,width:1280,name:"camera"}).then((function(e){return r(e),e}))}),[]);return Object(a.useEffect)((function(){c()}),[c]),Object(a.useEffect)((function(){var e=function(){return r(void 0)};if(n)return n.on("stopped",e),function(){n.off("stopped",e)}}),[n]),[n,c]}(),n=Object(p.a)(t,2),r=n[0],c=n[1];return{localTracks:[e,r].filter((function(e){return void 0!==e})),getLocalVideoTrack:c}}var R=n(44),C=n(14),k=n.n(C);var S=Object(a.createContext)(null);function w(e){var t=e.options,n=e.children,c=e.onError,i=void 0===c?function(){}:c,o=e.onDisconnect,l=void 0===o?function(){}:o,u=function(e){console.log("ERROR: ".concat(e.message),e),i(e)},s=I(),d=s.localTracks,f=s.getLocalVideoTrack,E=function(e,t,n){var r=Object(a.useState)(new k.a),c=Object(p.a)(r,2),i=c[0],o=c[1],l=Object(a.useState)(!1),u=Object(p.a)(l,2),s=u[0],d=u[1],f=Object(a.useRef)((function(){})),E=Object(a.useRef)([]);return Object(a.useEffect)((function(){E.current=e}),[e]),{room:i,isConnecting:s,connect:Object(a.useCallback)((function(e){return d(!0),j.a.connect(e,Object(R.a)({},n,{tracks:[]})).then((function(e){o(e),e.once("disconnected",(function(){setTimeout((function(){return o(new k.a)})),window.removeEventListener("beforeunload",f.current)})),window.twilioRoom=e,E.current.forEach((function(t){return e.localParticipant.publishTrack(t,{priority:"video"===t.kind?"low":"standard"})})),f.current=function(){return e.disconnect()},d(!1),window.addEventListener("beforeunload",f.current)}),(function(e){t(e),d(!1)}))}),[n,t])}}(d,u,t),m=E.room,A=E.isConnecting,b=E.connect;return function(e,t){Object(a.useEffect)((function(){var n=function(e,n){n&&t(n)};return e.on("disconnected",n),function(){e.off("disconnected",n)}}),[e,t])}(m,i),function(e,t){var n=e.localParticipant;Object(a.useEffect)((function(){if(n)return n.on("trackPublicationFailed",t),function(){n.off("trackPublicationFailed",t)}}),[n,t])}(m,i),function(e,t){Object(a.useEffect)((function(){return e.on("disconnected",t),function(){e.off("disconnected",t)}}),[e,t])}(m,l),r.a.createElement(S.Provider,{value:{room:m,localTracks:d,isConnecting:A,onError:u,onDisconnect:l,getLocalVideoTrack:f,connect:b}},r.a.createElement(v,{room:m},n))}function y(){var e=Object(a.useContext)(S);if(!e)throw new Error("useVideoContext must be used within a VideoProvider");return e}var B=Object(s.a)((function(e){return Object(d.a)({fab:{margin:e.spacing(1)}})}));function P(){var e=B(),t=y().room;return r.a.createElement(b.a,{title:"End Call",onClick:function(){return t.disconnect()},placement:"top",PopperProps:{disablePortal:!0}},r.a.createElement(A.a,{className:e.fab,color:"primary"},r.a.createElement(m.a,null)))}var x=n(152),Q=n.n(x),L=n(75),N=n.n(L);function _(){var e=y().localTracks.find((function(e){return"audio"===e.kind}));return[function(e){var t=Object(a.useState)(!e||e.isEnabled),n=Object(p.a)(t,2),r=n[0],c=n[1];return Object(a.useEffect)((function(){if(c(!e||e.isEnabled),e){var t=function(){return c(!0)},n=function(){return c(!1)};return e.on("enabled",t),e.on("disabled",n),function(){e.off("enabled",t),e.off("disabled",n)}}}),[e]),r}(e),Object(a.useCallback)((function(){e&&(e.isEnabled?e.disable():e.enable())}),[e])]}var T=Object(s.a)((function(e){return Object(d.a)({fab:{margin:e.spacing(1)}})}));function D(e){var t=T(),n=_(),a=Object(p.a)(n,2),c=a[0],i=a[1];return r.a.createElement(b.a,{title:c?"Mute Audio":"Unmute Audio",placement:"top",PopperProps:{disablePortal:!0}},r.a.createElement(A.a,{className:t.fab,onClick:i,disabled:e.disabled,"data-cy-audio-toggle":!0},c?r.a.createElement(Q.a,null):r.a.createElement(N.a,null)))}var U=n(153),M=n.n(U),V=n(51),F=n.n(V);var J=Object(s.a)((function(e){return Object(d.a)({fab:{margin:e.spacing(1)}})}));function z(e){var t=J(),n=function(){var e=y(),t=e.room.localParticipant,n=e.localTracks,r=e.getLocalVideoTrack,c=n.find((function(e){return"camera"===e.name})),i=Object(a.useCallback)((function(){if(c){if(t){var e=t.unpublishTrack(c);t.emit("trackUnpublished",e)}c.stop()}else r().then((function(e){t&&t.publishTrack(e)}))}),[c,t,r]);return[!!c,i]}(),c=Object(p.a)(n,2),i=c[0],o=c[1];return r.a.createElement(b.a,{title:i?"Mute Video":"Unmute Video",placement:"top",PopperProps:{disablePortal:!0}},r.a.createElement(A.a,{className:t.fab,onClick:o,disabled:e.disabled},i?r.a.createElement(M.a,null):r.a.createElement(F.a,null)))}var Z=n(76),G=n.n(Z),K=n(154),W=n.n(K);function H(){var e=y().room,t=Object(a.useState)(),n=Object(p.a)(t,2),r=n[0],c=n[1];return Object(a.useEffect)((function(){if("connected"===e.state){var t=function(){c(Array.from(e.participants.values()).concat(e.localParticipant).find((function(e){return Array.from(e.tracks.values()).find((function(e){return"screen"===e.trackName}))})))};return t(),e.on("trackPublished",t),e.on("trackUnpublished",t),e.on("participantDisconnected",t),e.localParticipant.on("trackPublished",t),e.localParticipant.on("trackUnpublished",t),function(){e.off("trackPublished",t),e.off("trackUnpublished",t),e.off("participantDisconnected",t),e.localParticipant.off("trackPublished",t),e.localParticipant.off("trackUnpublished",t)}}}),[e]),r}var Y=Object(s.a)((function(e){return Object(d.a)({fab:{margin:e.spacing(1),"&[disabled]":{color:"rgba(225, 225, 225, 0.8)",backgroundColor:"rgba(175, 175, 175, 0.6);"}}})}));function X(e){var t=Y(),n=function(){var e=y(),t=e.room,n=e.onError,r=Object(a.useState)(!1),c=Object(p.a)(r,2),i=c[0],o=c[1],l=Object(a.useRef)(null),u=Object(a.useCallback)((function(){navigator.mediaDevices.getDisplayMedia({audio:!1,video:{frameRate:10,height:1080,width:1920}}).then((function(e){var a=e.getTracks()[0];t.localParticipant.publishTrack(a,{name:"screen",priority:"high"}).then((function(e){l.current=function(){t.localParticipant.unpublishTrack(a),t.localParticipant.emit("trackUnpublished",e),a.stop(),o(!1)},a.onended=l.current,o(!0)})).catch(n)})).catch((function(e){"AbortError"!==e.name&&"NotAllowedError"!==e.name&&n(e)}))}),[t,n]),s=Object(a.useCallback)((function(){i?l.current():u()}),[i,u,l]);return[i,s]}(),c=Object(p.a)(n,2),i=c[0],o=c[1],l=H(),u=y().room,s=l&&l!==u.localParticipant,d=navigator.mediaDevices&&navigator.mediaDevices.getDisplayMedia,f=e.disabled||s||!d,E="Share Screen";return i&&(E="Stop Sharing Screen"),s&&(E="Cannot share screen when another user is sharing"),d||(E="Screen sharing is not supported with this browser"),r.a.createElement(b.a,{title:E,placement:"top",PopperProps:{disablePortal:!0},style:{cursor:f?"not-allowed":"pointer"}},r.a.createElement("div",null,r.a.createElement(A.a,{className:t.fab,onClick:o,disabled:f},i?r.a.createElement(W.a,null):r.a.createElement(G.a,null))))}var q=n(155),$=n.n(q);function ee(){var e=y().room,t=Object(a.useState)("disconnected"),n=Object(p.a)(t,2),r=n[0],c=n[1];return Object(a.useEffect)((function(){var t=function(){return c(e.state||"disconnected")};return t(),e.on("disconnected",t).on("reconnected",t).on("reconnecting",t),function(){e.off("disconnected",t).off("reconnected",t).off("reconnecting",t)}}),[e]),r}var te=Object(s.a)((function(e){return Object(d.a)({container:{display:"flex",position:"absolute",right:"50%",transform:"translate(50%, 30px)",bottom:"50px",zIndex:1,transition:"opacity 1.2s, transform 1.2s, visibility 0s 1.2s",opacity:0,visibility:"hidden","&.showControls, &:hover":{transition:"opacity 0.6s, transform 0.6s, visibility 0s",opacity:1,visibility:"visible",transform:"translate(50%, 0px)"}}})}));function ne(){var e=te(),t=ee(),n="reconnecting"===t,c=function(){var e=Object(a.useState)(!0),t=Object(p.a)(e,2),n=t[0],r=t[1],c=Object(a.useRef)(0);return Object(a.useEffect)((function(){var e=$()((function(){r(!0),clearTimeout(c.current);var e=window.setTimeout((function(){return r(!1)}),5e3);c.current=e}),500);return e(),window.addEventListener("mousemove",e),window.addEventListener("click",e),window.addEventListener("keydown",e),function(){window.removeEventListener("mousemove",e),window.removeEventListener("click",e),window.removeEventListener("keydown",e),clearTimeout(c.current)}}),[]),n}()||"disconnected"===t;return r.a.createElement("div",{className:Object(f.a)(e.container,{showControls:c})},r.a.createElement(D,{disabled:n}),r.a.createElement(z,{disabled:n}),"disconnected"!==t&&r.a.createElement(r.a.Fragment,null,r.a.createElement(X,{disabled:n}),r.a.createElement(P,null)))}var ae=Object(u.a)("video")({width:"100%",maxHeight:"100%",objectFit:"contain"});function re(e){var t=e.track,n=e.isLocal,c=e.priority,i=Object(a.useRef)(null);Object(a.useEffect)((function(){var e=i.current;return e.muted=!0,t.setPriority&&c&&t.setPriority(c),t.attach(e),function(){t.detach(e),t.setPriority&&c&&t.setPriority(null)}}),[t,c]);var o=n?{transform:"rotateY(180deg)"}:{};return r.a.createElement(ae,{ref:i,style:o})}function ce(){var e=y().localTracks.find((function(e){return"camera"===e.name}));return e?r.a.createElement(re,{track:e,isLocal:!0}):null}var ie=n(351),oe=n(350),le=n(353),ue=n(358),se=n(157),de=n.n(se),fe=n(156),Ee=n.n(fe),me=n(345),Ae=n(46),be=n.n(Ae);var pe=Object(u.a)(me.a)({marginLeft:"auto"});function he(){var e=function(){var e=Object(a.useState)(!!be.a.fullscreenElement),t=Object(p.a)(e,2),n=t[0],r=t[1];Object(a.useEffect)((function(){var e=function(){return r(!!be.a.fullscreenElement)};return be.a.addEventListener("fullscreenchange",e),function(){be.a.removeEventListener("fullscreenchange",e)}}),[]);var c=Object(a.useCallback)((function(){n?be.a.exitFullscreen():be.a.requestFullscreen(document.documentElement)}),[n]);return[n,c]}(),t=Object(p.a)(e,2),n=t[0],c=t[1];return r.a.createElement(pe,{"aria-label":"full screen",onClick:c},n?r.a.createElement(Ee.a,null):r.a.createElement(de.a,null))}var ge=n(352),ve=n(360),Oe=n(349),je=n(347),Ie=n(348),Re=n(346),Ce=n(158);var ke=function(e){var t=e.open,n=e.onClose;return r.a.createElement(ve.a,{open:t,onClose:n,fullWidth:!0,maxWidth:"xs"},r.a.createElement(Re.a,null,"About:"),r.a.createElement(je.a,null,r.a.createElement(Ie.a,null,"Browser supported: ",String(j.a.isSupported)),r.a.createElement(Ie.a,null,"SDK Version: ",j.a.version),r.a.createElement(Ie.a,null,"App Version: ",Ce.a),r.a.createElement(Ie.a,null,"Deployed Tag: ",Object({NODE_ENV:"production",PUBLIC_URL:""}).REACT_APP_GIT_TAG||"N/A"),r.a.createElement(Ie.a,null,"Deployed Commit Hash: ",Object({NODE_ENV:"production",PUBLIC_URL:""}).REACT_APP_GIT_COMMIT||"N/A")),r.a.createElement(Oe.a,null,r.a.createElement(oe.a,{onClick:n,color:"primary",autoFocus:!0},"OK")))},Se=n(166),we=n(365),ye=n(161),Be=n.n(ye),Pe=n(364),xe=n(306),Qe=n(159),Le=n.n(Qe),Ne=Object(xe.a)({red:{color:"white",backgroundColor:"#F22F46"}});function _e(e){var t=e.user,n=Ne(),a=t,c=a.displayName,i=a.photoURL;return i?r.a.createElement(Pe.a,{src:i}):r.a.createElement(Pe.a,{className:n.red},c?c.split(" ").map((function(e){return e[0]})).join("").toUpperCase():r.a.createElement(Le.a,null))}var Te=n(35),De=n.n(Te),Ue=n(53),Me=n(59),Ve=(n(302),{apiKey:Object({NODE_ENV:"production",PUBLIC_URL:""}).REACT_APP_FIREBASE_API_KEY,authDomain:Object({NODE_ENV:"production",PUBLIC_URL:""}).REACT_APP_FIREBASE_AUTH_DOMAIN,databaseURL:Object({NODE_ENV:"production",PUBLIC_URL:""}).REACT_APP_FIREBASE_DATABASE_URL,storageBucket:Object({NODE_ENV:"production",PUBLIC_URL:""}).REACT_APP_FIREBASE_STORAGE_BUCKET,messagingSenderId:Object({NODE_ENV:"production",PUBLIC_URL:""}).REACT_APP_FIREBASE_MESSAGING_SENDER_ID});var Fe=n(38);function Je(e,t,n){return fetch("/token",{method:"POST",headers:{"content-type":"application/json"},body:JSON.stringify({user_identity:e,room_name:t,passcode:n})})}function ze(e){return Je("temp-name","temp-room",e).then(function(){var e=Object(Ue.a)(De.a.mark((function e(t){var n,a;return De.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.json();case 2:if(n=e.sent,401!==t.status){e.next=5;break}return e.abrupt("return",{isValid:!1,error:null===(a=n.error)||void 0===a?void 0:a.message});case 5:if(!t.ok||!n.token){e.next=7;break}return e.abrupt("return",{isValid:!0});case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}())}function Ze(){var e=Object(Fe.g)(),t=Object(a.useState)(null),n=Object(p.a)(t,2),r=n[0],c=n[1],i=Object(a.useState)(!1),o=Object(p.a)(i,2),l=o[0],u=o[1],s=Object(a.useCallback)((function(e,t){return Je(e,t,r.passcode).then((function(e){return e.json()})).then((function(e){return e.token}))}),[r]);Object(a.useEffect)((function(){var t=function(){var e=window.location.search.match(/passcode=(.*)&?/);return e?e[1]:window.sessionStorage.getItem("passcode")}();t?ze(t).then((function(n){(null===n||void 0===n?void 0:n.isValid)&&(c({passcode:t}),window.sessionStorage.setItem("passcode",t),e.replace(window.location.pathname))})).then((function(){return u(!0)})):u(!0)}),[e]);var d=Object(a.useCallback)((function(e){return ze(e).then((function(t){if(null===t||void 0===t||!t.isValid)throw new Error(function(e){switch(e){case"passcode incorrect":return"Passcode is incorrect";case"passcode expired":return"Passcode has expired";default:return e}}(null===t||void 0===t?void 0:t.error));c({passcode:e}),window.sessionStorage.setItem("passcode",e)}))}),[]),f=Object(a.useCallback)((function(){return c(null),window.sessionStorage.removeItem("passcode"),Promise.resolve()}),[]);return{user:r,isAuthReady:l,getToken:s,signIn:d,signOut:f}}var Ge=Object(a.createContext)(null);function Ke(){var e=Object(a.useContext)(Ge);if(!e)throw new Error("useAppState must be used within the AppStateProvider");return e}function We(){var e=Ke(),t=e.user,n=e.signOut,c=y(),i=c.room,o=c.localTracks,l=Object(a.useState)(!1),u=Object(p.a)(l,2),s=u[0],d=u[1],f=Object(a.useState)(!1),E=Object(p.a)(f,2),m=E[0],A=E[1],b=Object(a.useRef)(null),h=Object(a.useCallback)((function(){var e;null===(e=i.disconnect)||void 0===e||e.call(i),o.forEach((function(e){return e.stop()})),null===n||void 0===n||n()}),[i.disconnect,o,n]);return r.a.createElement("div",{ref:b},r.a.createElement(me.a,{color:"inherit",onClick:function(){return A((function(e){return!e}))}},t?r.a.createElement(_e,{user:t}):r.a.createElement(Be.a,null)),r.a.createElement(Se.a,{open:m,onClose:function(){return A((function(e){return!e}))},anchorEl:b.current},(null===t||void 0===t?void 0:t.displayName)&&r.a.createElement(we.a,{disabled:!0},t.displayName),r.a.createElement(we.a,{onClick:function(){return d(!0)}},"About"),t&&r.a.createElement(we.a,{onClick:h},"Logout")),r.a.createElement(ke,{open:s,onClose:function(){d(!1),A(!1)}}))}var He=n(170),Ye=Object(s.a)((function(e){return Object(d.a)({container:{backgroundColor:e.palette.background.default},form:{display:"flex",alignItems:"center"},textField:{marginLeft:e.spacing(1),marginRight:e.spacing(1),width:200},loadingSpinner:{marginLeft:"1em"},displayName:{marginLeft:"2.2em",minWidth:"200px",fontWeight:600}})}));function Xe(){var e=Ye(),t=Object(Fe.i)().URLRoomName,n=Ke(),c=n.user,i=n.getToken,o=y(),l=o.isConnecting,u=o.connect,s=ee(),d=Object(a.useState)((null===c||void 0===c?void 0:c.displayName)||""),f=Object(p.a)(d,2),E=f[0],m=f[1],A=Object(a.useState)(""),b=Object(p.a)(A,2),h=b[0],g=b[1];Object(a.useEffect)((function(){t&&g(t)}),[t]);return r.a.createElement(ie.a,{className:e.container,position:"static"},r.a.createElement(ge.a,null,"disconnected"===s?r.a.createElement("form",{className:e.form,onSubmit:function(e){e.preventDefault(),window.location.origin.includes("twil.io")||window.history.replaceState(null,"",window.encodeURI("/room/".concat(h))),i(E,h).then((function(e){return u(e)}))}},(null===c||void 0===c?void 0:c.displayName)?r.a.createElement(He.a,{className:e.displayName,variant:"body1"},c.displayName):r.a.createElement(ue.a,{id:"menu-name",label:"Name",className:e.textField,value:E,onChange:function(e){m(e.target.value)},margin:"dense"}),r.a.createElement(ue.a,{id:"menu-room",label:"Room",className:e.textField,value:h,onChange:function(e){g(e.target.value)},margin:"dense"}),r.a.createElement(oe.a,{type:"submit",color:"primary",variant:"contained",disabled:l||!E||!h},"Join Room"),l&&r.a.createElement(le.a,{className:e.loadingSpinner})):r.a.createElement("h3",null,h),r.a.createElement(he,null),r.a.createElement(We,null)))}var qe=n(162),$e=n.n(qe),et=n(366),tt=n(354),nt=Object(s.a)({snackbar:{backgroundColor:"#6db1ff"},message:{display:"flex",alignItems:"center"},icon:{marginRight:"0.8em"}});function at(){var e=nt(),t=ee();return r.a.createElement(et.a,{anchorOrigin:{vertical:"bottom",horizontal:"right"},open:"reconnecting"===t},r.a.createElement(tt.a,{className:e.snackbar,message:r.a.createElement("span",{className:e.message},r.a.createElement($e.a,{className:e.icon}),"Reconnecting\u2026")}))}var rt=n(34),ct=n(80),it=n.n(ct),ot=Object(u.a)("div")({position:"absolute",zIndex:1,width:"100%",display:"flex",flexDirection:"column",justifyContent:"center",alignItems:"center"}),lt=Object(u.a)("h3")({textAlign:"center",margin:"0.6em 0"});function ut(){return r.a.createElement(ot,null,r.a.createElement("div",null,r.a.createElement(it.a,{fontSize:"large"})),r.a.createElement(lt,null,"Insufficient Bandwidth"))}var st=Object(u.a)("div")({display:"flex",alignItems:"flex-end","& div":{width:"2px",border:"1px solid black",boxSizing:"content-box","&:not(:last-child)":{borderRight:"none"}}});function dt(e){var t=e.qualityLevel;return null===t?null:r.a.createElement(st,null,[0,1,2,3,4].map((function(e){return r.a.createElement("div",{key:e,style:{height:"".concat(3*(e+1),"px"),background:t>e?"#0c0":"#040"}})})))}var ft=Object(s.a)({indicator:{width:"10px",height:"10px",borderRadius:"100%",background:"#0c0",display:"inline-block",marginRight:"3px"},isReconnecting:{background:"#ffb100"}});function Et(e){var t=function(e){var t=Object(a.useState)(!1),n=Object(p.a)(t,2),r=n[0],c=n[1];return Object(a.useEffect)((function(){var t=function(){return c(!0)},n=function(){return c(!1)};return e.on("reconnecting",t),e.on("reconnected",n),function(){e.off("reconnecting",t),e.off("reconnected",n)}}),[e]),r}(e.participant),n=ft();return r.a.createElement(b.a,{title:t?"Participant is reconnecting":"Participant is connected"},r.a.createElement("span",{className:Object(f.a)(n.indicator,Object(rt.a)({},n.isReconnecting,t))}))}var mt=n(163),At=n(74);function bt(){return r.a.createElement(b.a,{title:"Participant is pinned. Click to un-pin.",placement:"top"},r.a.createElement(At.a,{style:{float:"right",fontSize:"29px"}},r.a.createElement(mt.a,null)))}var pt=n(64);function ht(e){var t=Object(a.useState)([]),n=Object(p.a)(t,2),r=n[0],c=n[1];return Object(a.useEffect)((function(){c(Array.from(e.tracks.values()));var t=function(e){return c((function(t){return[].concat(Object(pt.a)(t),[e])}))},n=function(e){return c((function(t){return t.filter((function(t){return t!==e}))}))};return e.on("trackPublished",t),e.on("trackUnpublished",n),function(){e.off("trackPublished",t),e.off("trackUnpublished",n)}}),[e]),r}function gt(e){var t=Object(a.useState)(e&&e.isSwitchedOff),n=Object(p.a)(t,2),r=n[0],c=n[1];return Object(a.useEffect)((function(){if(c(e&&e.isSwitchedOff),e){var t=function(){return c(!0)},n=function(){return c(!1)};return e.on("switchedOff",t),e.on("switchedOn",n),function(){e.off("switchedOff",t),e.off("switchedOn",n)}}}),[e]),!!r}function vt(e){var t=Object(a.useState)(e&&e.track),n=Object(p.a)(t,2),r=n[0],c=n[1];return Object(a.useEffect)((function(){if(c(e&&e.track),e){var t=function(){return c(null)};return e.on("subscribed",c),e.on("unsubscribed",t),function(){e.off("subscribed",c),e.off("unsubscribed",t)}}}),[e]),r}var Ot=Object(s.a)((function(e){return Object(d.a)({container:{position:"relative",display:"flex",alignItems:"center",height:"".concat(9*e.sidebarWidth/16,"px"),overflow:"hidden",cursor:"pointer","& video":{filter:"none"},"& svg":{stroke:"black",strokeWidth:"0.8px"}},isVideoSwitchedOff:{"& video":{filter:"blur(4px) grayscale(1) brightness(0.5)"}},infoContainer:{position:"absolute",zIndex:1,display:"flex",flexDirection:"column",justifyContent:"space-between",height:"100%",padding:"0.4em",width:"100%",background:"transparent"},hideVideo:{background:"black"},identity:{background:"rgba(0, 0, 0, 0.7)",padding:"0.1em 0.3em",margin:0,display:"flex",alignItems:"center"},infoRow:{display:"flex",justifyContent:"space-between"}})}));function jt(e){var t=e.participant,n=e.onClick,c=e.isSelected,i=e.children,o=ht(t),l=o.find((function(e){return"audio"===e.kind})),u=o.find((function(e){return"camera"===e.trackName})),s=function(e){var t=Object(a.useState)(e.networkQualityLevel),n=Object(p.a)(t,2),r=n[0],c=n[1];return Object(a.useEffect)((function(){var t=function(e){return c(e)};return c(e.networkQualityLevel),e.on("networkQualityLevelChanged",t),function(){e.off("networkQualityLevelChanged",t)}}),[e]),r}(t),d=function(e){var t=Object(a.useState)(!!e&&e.isTrackEnabled),n=Object(p.a)(t,2),r=n[0],c=n[1];return Object(a.useEffect)((function(){if(c(!!e&&e.isTrackEnabled),e){var t=function(){return c(!0)},n=function(){return c(!1)};return e.on("trackEnabled",t),e.on("trackDisabled",n),function(){e.off("trackEnabled",t),e.off("trackDisabled",n)}}}),[e]),r}(l),E=Boolean(u),m=o.find((function(e){return"screen"===e.trackName})),A=gt(vt(u)),b=Ot();return r.a.createElement("div",{className:Object(f.a)(b.container,Object(rt.a)({},b.isVideoSwitchedOff,A)),onClick:n,"data-cy-participant":t.identity},r.a.createElement("div",{className:Object(f.a)(b.infoContainer,Object(rt.a)({},b.hideVideo,!E))},r.a.createElement("div",{className:b.infoRow},r.a.createElement("h4",{className:b.identity},r.a.createElement(Et,{participant:t}),t.identity),r.a.createElement(dt,{qualityLevel:s})),r.a.createElement("div",null,!d&&r.a.createElement(N.a,{"data-cy-audio-mute-icon":!0}),!E&&r.a.createElement(F.a,null),m&&r.a.createElement(G.a,null),c&&r.a.createElement(bt,null))),A&&r.a.createElement(ut,null),i)}function It(e){var t=e.track,n=Object(a.useRef)(null);return Object(a.useEffect)((function(){var e=n.current;return t.attach(e),function(){t.detach(e)}}),[t]),r.a.createElement("audio",{ref:n})}function Rt(e){var t=e.publication,n=e.isLocal,a=e.disableAudio,c=e.videoPriority,i=vt(t);if(!i)return null;switch(i.kind){case"video":return r.a.createElement(re,{track:i,priority:c,isLocal:"camera"===i.name&&n});case"audio":return a?null:r.a.createElement(It,{track:i});default:return null}}function Ct(e){var t,n=e.participant,a=e.disableAudio,c=e.enableScreenShare,i=e.videoPriority,o=y().room,l=ht(n),u=n===o.localParticipant;return t=c&&l.some((function(e){return"screen"===e.trackName}))?l.filter((function(e){return"camera"!==e.trackName})):l.filter((function(e){return"screen"!==e.trackName})),r.a.createElement(r.a.Fragment,null,t.map((function(e){return r.a.createElement(Rt,{key:e.kind,publication:e,participant:n,isLocal:u,disableAudio:a,videoPriority:i})})))}function kt(e){var t=e.participant,n=e.disableAudio,a=e.enableScreenShare,c=e.onClick,i=e.isSelected;return r.a.createElement(jt,{participant:t,onClick:c,isSelected:i},r.a.createElement(Ct,{participant:t,disableAudio:n,enableScreenShare:a}))}function St(){var e=y().room,t=Object(a.useState)(e.dominantSpeaker),n=Object(p.a)(t,2),r=n[0],c=n[1];return Object(a.useEffect)((function(){var t=function(e){null!==e&&c(e)},n=function(e){c((function(t){return t===e?null:t}))};return e.on("dominantSpeakerChanged",t),e.on("participantDisconnected",n),function(){e.off("dominantSpeakerChanged",t),e.off("participantDisconnected",n)}}),[e]),r}function wt(){var e=y().room,t=St(),n=Object(a.useState)(Array.from(e.participants.values())),r=Object(p.a)(n,2),c=r[0],i=r[1];return Object(a.useEffect)((function(){t&&i((function(e){return[t].concat(Object(pt.a)(e.filter((function(e){return e!==t}))))}))}),[t]),Object(a.useEffect)((function(){var t=function(e){return i((function(t){return[].concat(Object(pt.a)(t),[e])}))},n=function(e){return i((function(t){return t.filter((function(t){return t!==e}))}))};return e.on("participantConnected",t),e.on("participantDisconnected",n),function(){e.off("participantConnected",t),e.off("participantDisconnected",n)}}),[e]),c}var yt=Object(u.a)("aside")((function(e){var t=e.theme;return{position:"absolute",top:0,bottom:0,right:"calc(100% - ".concat(t.sidebarWidth,"px)"),left:0,padding:"0.5em",overflowY:"auto"}}));function Bt(){var e=y().room.localParticipant,t=wt(),n=g(),a=Object(p.a)(n,2),c=a[0],i=a[1];return r.a.createElement(yt,null,r.a.createElement(kt,{participant:e,isSelected:c===e,onClick:function(){return i(e)}}),t.map((function(e){return r.a.createElement(kt,{key:e.sid,participant:e,isSelected:c===e,onClick:function(){return i(e)}})})))}var Pt=Object(s.a)({container:{position:"relative",display:"flex",alignItems:"center"},isVideoSwitchedOff:{"& video":{filter:"blur(4px) grayscale(1) brightness(0.5)"}},identity:{background:"rgba(0, 0, 0, 0.7)",padding:"0.1em 0.3em",margin:"1em",fontSize:"1.2em",display:"inline-flex","& svg":{marginLeft:"0.3em"}},infoContainer:{position:"absolute",zIndex:1,height:"100%",padding:"0.4em",width:"100%"}});function xt(e){var t=e.participant,n=e.children,a=Pt(),c=ht(t),i=c.find((function(e){return"camera"===e.trackName})),o=c.find((function(e){return"screen"===e.trackName})),l=Boolean(i),u=gt(vt(o||i));return r.a.createElement("div",{"data-cy-main-participant":!0,className:Object(f.a)(a.container,Object(rt.a)({},a.isVideoSwitchedOff,u))},r.a.createElement("div",{className:a.infoContainer},r.a.createElement("h4",{className:a.identity},t.identity,!l&&r.a.createElement(F.a,null))),u&&r.a.createElement(ut,null),n)}function Qt(){var e=function(){var e=g(),t=Object(p.a)(e,1)[0],n=H(),a=St(),r=wt(),c=y().room.localParticipant;return t||n||a||r[0]||c}();return(r.a.createElement(xt,{participant:e},r.a.createElement(Ct,{participant:e,disableAudio:!0,enableScreenShare:!0,videoPriority:"high"})))}var Lt=Object(u.a)("div")({position:"relative",height:"100%"}),Nt=Object(u.a)("div")((function(e){return{position:"absolute",left:e.theme.sidebarWidth,right:0,top:0,bottom:0,"& > div":{height:"100%"}}}));function _t(){return r.a.createElement(Lt,null,r.a.createElement(Bt,null),r.a.createElement(Nt,null,r.a.createElement(Qt,null)))}var Tt=Object(u.a)("div")({display:"flex",flexDirection:"column",height:"100vh"}),Dt=Object(u.a)("main")({height:"100%",position:"relative"});function Ut(){var e=ee();return r.a.createElement(Tt,null,r.a.createElement(Xe,null),r.a.createElement(Dt,null,"disconnected"===e?r.a.createElement(ce,null):r.a.createElement(_t,null),r.a.createElement(ne,null)),r.a.createElement(at,null))}var Mt=n(49);var Vt=function(e){var t=e.dismissError,n=e.error,a=n||{},c=a.message,i=a.code,o=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1?arguments[1]:void 0;switch(t){case 20101:return e+". Please make sure you are using the correct credentials.";default:return e}}(c,i);return r.a.createElement(ve.a,{open:null!==n,onClose:function(){return t()},fullWidth:!0,maxWidth:"xs"},r.a.createElement(Re.a,null,"ERROR"),r.a.createElement(je.a,null,r.a.createElement(Ie.a,null,o),i&&r.a.createElement("pre",null,r.a.createElement("code",null,"Error Code: ",i))),r.a.createElement(Oe.a,null,r.a.createElement(oe.a,{onClick:function(){return t()},color:"primary",autoFocus:!0},"OK")))},Ft=n(356),Jt=n(169);function zt(){return(zt=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e}).apply(this,arguments)}function Zt(e,t){if(null==e)return{};var n,a,r=function(e,t){if(null==e)return{};var n,a,r={},c=Object.keys(e);for(a=0;a<c.length;a++)n=c[a],t.indexOf(n)>=0||(r[n]=e[n]);return r}(e,t);if(Object.getOwnPropertySymbols){var c=Object.getOwnPropertySymbols(e);for(a=0;a<c.length;a++)n=c[a],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}var Gt=r.a.createElement("title",null,"btn_google_light_normal_ios"),Kt=r.a.createElement("desc",null,"Created with Sketch."),Wt=r.a.createElement("defs",null,r.a.createElement("filter",{x:"-50%",y:"-50%",width:"200%",height:"200%",filterUnits:"objectBoundingBox",id:"filter-1"},r.a.createElement("feOffset",{dx:0,dy:1,in:"SourceAlpha",result:"shadowOffsetOuter1"}),r.a.createElement("feGaussianBlur",{stdDeviation:.5,in:"shadowOffsetOuter1",result:"shadowBlurOuter1"}),r.a.createElement("feColorMatrix",{values:"0 0 0 0 0   0 0 0 0 0   0 0 0 0 0  0 0 0 0.168 0",in:"shadowBlurOuter1",type:"matrix",result:"shadowMatrixOuter1"}),r.a.createElement("feOffset",{dx:0,dy:0,in:"SourceAlpha",result:"shadowOffsetOuter2"}),r.a.createElement("feGaussianBlur",{stdDeviation:.5,in:"shadowOffsetOuter2",result:"shadowBlurOuter2"}),r.a.createElement("feColorMatrix",{values:"0 0 0 0 0   0 0 0 0 0   0 0 0 0 0  0 0 0 0.084 0",in:"shadowBlurOuter2",type:"matrix",result:"shadowMatrixOuter2"}),r.a.createElement("feMerge",null,r.a.createElement("feMergeNode",{in:"shadowMatrixOuter1"}),r.a.createElement("feMergeNode",{in:"shadowMatrixOuter2"}),r.a.createElement("feMergeNode",{in:"SourceGraphic"}))),r.a.createElement("rect",{id:"path-2",x:0,y:0,width:40,height:40,rx:2})),Ht=r.a.createElement("g",{id:"Google-Button",stroke:"none",strokeWidth:1,fill:"none",fillRule:"evenodd"},r.a.createElement("g",{id:"9-PATCH",transform:"translate(-608.000000, -160.000000)"}),r.a.createElement("g",{id:"btn_google_light_normal",transform:"translate(-1.000000, -1.000000)"},r.a.createElement("g",{id:"logo_googleg_48dp",transform:"translate(15.000000, 15.000000)"},r.a.createElement("path",{d:"M17.64,9.20454545 C17.64,8.56636364 17.5827273,7.95272727 17.4763636,7.36363636 L9,7.36363636 L9,10.845 L13.8436364,10.845 C13.635,11.97 13.0009091,12.9231818 12.0477273,13.5613636 L12.0477273,15.8195455 L14.9563636,15.8195455 C16.6581818,14.2527273 17.64,11.9454545 17.64,9.20454545 L17.64,9.20454545 Z",id:"Shape",fill:"#4285F4"}),r.a.createElement("path",{d:"M9,18 C11.43,18 13.4672727,17.1940909 14.9563636,15.8195455 L12.0477273,13.5613636 C11.2418182,14.1013636 10.2109091,14.4204545 9,14.4204545 C6.65590909,14.4204545 4.67181818,12.8372727 3.96409091,10.71 L0.957272727,10.71 L0.957272727,13.0418182 C2.43818182,15.9831818 5.48181818,18 9,18 L9,18 Z",id:"Shape",fill:"#34A853"}),r.a.createElement("path",{d:"M3.96409091,10.71 C3.78409091,10.17 3.68181818,9.59318182 3.68181818,9 C3.68181818,8.40681818 3.78409091,7.83 3.96409091,7.29 L3.96409091,4.95818182 L0.957272727,4.95818182 C0.347727273,6.17318182 0,7.54772727 0,9 C0,10.4522727 0.347727273,11.8268182 0.957272727,13.0418182 L3.96409091,10.71 L3.96409091,10.71 Z",id:"Shape",fill:"#FBBC05"}),r.a.createElement("path",{d:"M9,3.57954545 C10.3213636,3.57954545 11.5077273,4.03363636 12.4404545,4.92545455 L15.0218182,2.34409091 C13.4631818,0.891818182 11.4259091,0 9,0 C5.48181818,0 2.43818182,2.01681818 0.957272727,4.95818182 L3.96409091,7.29 C4.67181818,5.16272727 6.65590909,3.57954545 9,3.57954545 L9,3.57954545 Z",id:"Shape",fill:"#EA4335"}),r.a.createElement("path",{d:"M0,0 L18,0 L18,18 L0,18 L0,0 Z",id:"Shape"})),r.a.createElement("g",{id:"handles_square"}))),Yt=function(e){var t=e.svgRef,n=e.title,a=Zt(e,["svgRef","title"]);return r.a.createElement("svg",zt({width:"32px",height:"32px",viewBox:"7 7 32 32",ref:t},a),void 0===n?Gt:n?r.a.createElement("title",null,n):null,Kt,Wt,Ht)},Xt=r.a.forwardRef((function(e,t){return r.a.createElement(Yt,zt({svgRef:t},e))}));n.p;function qt(){return(qt=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e}).apply(this,arguments)}function $t(e,t){if(null==e)return{};var n,a,r=function(e,t){if(null==e)return{};var n,a,r={},c=Object.keys(e);for(a=0;a<c.length;a++)n=c[a],t.indexOf(n)>=0||(r[n]=e[n]);return r}(e,t);if(Object.getOwnPropertySymbols){var c=Object.getOwnPropertySymbols(e);for(a=0;a<c.length;a++)n=c[a],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}var en=r.a.createElement("path",{d:"M14.4 11.3c0 1.7-1.4 3.1-3.1 3.1S8.2 13 8.2 11.3s1.4-3.1 3.1-3.1 3.1 1.4 3.1 3.1zm-3.1 4.3c-1.7 0-3.1 1.4-3.1 3.1s1.4 3.1 3.1 3.1 3.1-1.4 3.1-3.1-1.4-3.1-3.1-3.1zM30 15c0 8.3-6.7 15-15 15S0 23.3 0 15 6.7 0 15 0s15 6.7 15 15zm-4 0c0-6.1-4.9-11-11-11S4 8.9 4 15s4.9 11 11 11 11-4.9 11-11zm-7.3.6c-1.7 0-3.1 1.4-3.1 3.1s1.4 3.1 3.1 3.1 3.1-1.4 3.1-3.1-1.4-3.1-3.1-3.1zm0-7.4c-1.7 0-3.1 1.4-3.1 3.1s1.4 3.1 3.1 3.1 3.1-1.4 3.1-3.1-1.4-3.1-3.1-3.1zm51.6-2.3c.1 0 .2.1.3.2v3.2c0 .2-.2.3-.3.3H65c-.2 0-.3-.2-.3-.3V6.2c0-.2.2-.3.3-.3h5.3zm-.1 4.5H60c-.1 0-.3.1-.3.3l-1.3 5-.1.3-1.6-5.3c0-.1-.2-.3-.3-.3h-4c-.1 0-.3.1-.3.3l-1.5 5-.1.3-.1-.3-.6-2.5-.6-2.5c0-.1-.2-.3-.3-.3h-8V6.1c0-.1-.2-.3-.4-.2l-5 1.6c-.2 0-.3.1-.3.3v2.7h-1.3c-.1 0-.3.1-.3.3v3.8c0 .1.1.3.3.3h1.3v4.7c0 3.3 1.8 4.8 5.1 4.8 1.4 0 2.7-.3 3.6-.8v-4c0-.2-.2-.3-.3-.2-.5.2-1 .3-1.4.3-.9 0-1.4-.4-1.4-1.4v-3.4h2.9c.1 0 .3-.1.3-.3v-3.2L47.8 24c0 .1.2.3.3.3h4.2c.1 0 .3-.1.3-.3l1.8-5.6.9 2.9.8 2.7c0 .1.2.3.3.3h4.2c.1 0 .3-.1.3-.3l3.8-12.6V24c0 .1.1.3.3.3h5.1c.1 0 .3-.1.3-.3V10.7c0-.1-.1-.3-.2-.3zm6.7-4.5h-5.1c-.1 0-.3.1-.3.3v17.7c0 .1.1.3.3.3h5.1c.1 0 .3-.1.3-.3V6.1c0-.1-.1-.2-.3-.2zm6.8 0h-5.3c-.1 0-.3.1-.3.3v3.1c0 .1.1.3.3.3h5.3c.1 0 .3-.1.3-.3V6.1c0-.1-.1-.2-.3-.2zm-.1 4.5h-5.1c-.1 0-.3.1-.3.3v13.1c0 .1.1.3.3.3h5.1c.1 0 .3-.1.3-.3V10.7c0-.1-.1-.3-.3-.3zm16.1 6.8c0 3.8-3.2 7.1-7.7 7.1-4.4 0-7.6-3.3-7.6-7.1s3.2-7.1 7.7-7.1c4.4 0 7.6 3.3 7.6 7.1zm-5.4.1c0-1.4-1-2.5-2.2-2.4-1.3 0-2.2 1.1-2.2 2.4s1 2.4 2.2 2.4c1.3 0 2.2-1.1 2.2-2.4z"}),tn=function(e){var t=e.svgRef,n=e.title,a=$t(e,["svgRef","title"]);return r.a.createElement("svg",qt({fill:"#F22F46",viewBox:"0 0 100 30",ref:t},a),n?r.a.createElement("title",null,n):null,en)},nn=r.a.forwardRef((function(e,t){return r.a.createElement(tn,qt({svgRef:t},e))})),an=(n.p,n(164)),rn=n.n(an),cn=n(165),on=Object(s.a)({container:{height:"100vh",background:"#0D122B"},twilioLogo:{width:"55%",display:"block"},videoLogo:{width:"25%",padding:"2.4em 0 2.1em"},paper:{display:"flex",alignItems:"center",flexDirection:"column",padding:"2em",marginTop:"4em",background:"white",color:"black"},button:{color:"black",background:"white",margin:"0.8em 0 0.7em",textTransform:"none"},errorMessage:{color:"red",display:"flex",alignItems:"center",margin:"1em 0 0.2em","& svg":{marginRight:"0.4em"}}}),ln=Object(cn.a)({palette:{type:"light"}});var un=n(167);function sn(e){var t=e.children,n=Object(un.a)(e,["children"]),a=Ke(),c=a.isAuthReady,i=a.user||!Object({NODE_ENV:"production",PUBLIC_URL:""}).REACT_APP_SET_AUTH;return i||c?r.a.createElement(Fe.b,Object.assign({},n,{render:function(e){var n=e.location;return i?t:r.a.createElement(Fe.a,{to:{pathname:"/login",state:{from:n}}})}})):null}var dn=Object(cn.a)({palette:{type:"dark",primary:{main:"#F22F46"}},sidebarWidth:260}),fn={bandwidthProfile:{video:{mode:"collaboration",renderDimensions:{high:{height:1080,width:1920},standard:{height:90,width:160},low:{height:90,width:160}}}},dominantSpeaker:!0,maxAudioBitrate:12e3,networkQuality:{local:1,remote:1},preferredVideoCodecs:[{codec:"VP8",simulcast:!0}]},En=function(){var e=Ke(),t=e.error,n=e.setError;return r.a.createElement(w,{options:fn,onError:n},r.a.createElement(Vt,{dismissError:function(){return n(null)},error:t}),r.a.createElement(Ut,null))};i.a.render(r.a.createElement(l.a,{theme:dn},r.a.createElement(o.a,null),r.a.createElement(Mt.a,null,r.a.createElement((function(e){var t=Object(a.useState)(null),n=Object(p.a)(t,2),c=n[0],i=n[1],o={error:c,setError:i};return o="firebase"===Object({NODE_ENV:"production",PUBLIC_URL:""}).REACT_APP_SET_AUTH?Object(R.a)({},o,{},function(){var e=Object(a.useState)(null),t=Object(p.a)(e,2),n=t[0],r=t[1],c=Object(a.useState)(!1),i=Object(p.a)(c,2),o=i[0],l=i[1],u=Object(a.useCallback)(function(){var e=Object(Ue.a)(De.a.mark((function e(t,a){var r,c,i,o;return De.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=new window.Headers,e.next=3,n.getIdToken();case 3:return c=e.sent,r.set("Authorization",c),i=Object({NODE_ENV:"production",PUBLIC_URL:""}).REACT_APP_TOKEN_ENDPOINT||"/token",o=new window.URLSearchParams({identity:t,roomName:a}),e.abrupt("return",fetch("".concat(i,"?").concat(o),{headers:r}).then((function(e){return e.text()})));case 8:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),[n]);Object(a.useEffect)((function(){Me.initializeApp(Ve),Me.auth().onAuthStateChanged((function(e){r(e),l(!0)}))}),[]);var s=Object(a.useCallback)((function(){var e=new Me.auth.GoogleAuthProvider;return e.addScope("https://www.googleapis.com/auth/plus.login"),Me.auth().signInWithPopup(e).then((function(e){r(e.user)}))}),[]),d=Object(a.useCallback)((function(){return Me.auth().signOut().then((function(){r(null)}))}),[]);return{user:n,signIn:s,signOut:d,isAuthReady:o,getToken:u}}()):"passcode"===Object({NODE_ENV:"production",PUBLIC_URL:""}).REACT_APP_SET_AUTH?Object(R.a)({},o,{},Ze()):Object(R.a)({},o,{getToken:function(){var e=Object(Ue.a)(De.a.mark((function e(t,n){var a,r,c;return De.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=new window.Headers,r=Object({NODE_ENV:"production",PUBLIC_URL:""}).REACT_APP_TOKEN_ENDPOINT||"/token",c=new window.URLSearchParams({identity:t,roomName:n}),e.abrupt("return",fetch("".concat(r,"?").concat(c),{headers:a}).then((function(e){return e.text()})));case 4:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()}),r.a.createElement(Ge.Provider,{value:Object(R.a)({},o,{getToken:function(e,t){return o.getToken(e,t).catch((function(e){return i(e),Promise.reject(e)}))}})},e.children)}),null,r.a.createElement(Fe.d,null,r.a.createElement(sn,{exact:!0,path:"/"},r.a.createElement(En,null)),r.a.createElement(sn,{path:"/room/:URLRoomName"},r.a.createElement(En,null)),r.a.createElement(Fe.b,{path:"/login"},r.a.createElement((function(){var e=on(),t=Ke(),n=t.signIn,c=t.user,i=t.isAuthReady,o=Object(Fe.g)(),u=Object(Fe.h)(),s=Object(a.useState)(""),d=Object(p.a)(s,2),f=d[0],E=d[1],m=Object(a.useState)(null),A=Object(p.a)(m,2),b=A[0],h=A[1],g=Boolean(Object({NODE_ENV:"production",PUBLIC_URL:""}).REACT_APP_SET_AUTH),v=function(){h(null),null===n||void 0===n||n(f).then((function(){var e;o.replace((null===u||void 0===u?void 0:null===(e=u.state)||void 0===e?void 0:e.from)||{pathname:"/"})})).catch((function(e){return h(e)}))};return!c&&g||o.replace("/"),i?r.a.createElement(l.a,{theme:ln},r.a.createElement(Ft.a,{container:!0,justify:"center",alignItems:"flex-start",className:e.container},r.a.createElement(Jt.a,{className:e.paper,elevation:6},r.a.createElement(nn,{className:e.twilioLogo}),r.a.createElement("img",{className:e.videoLogo,src:rn.a,alt:"Video Logo"}),"firebase"===Object({NODE_ENV:"production",PUBLIC_URL:""}).REACT_APP_SET_AUTH&&r.a.createElement(oe.a,{variant:"contained",className:e.button,onClick:v,startIcon:r.a.createElement(Xt,null)},"Sign in with Google"),"passcode"===Object({NODE_ENV:"production",PUBLIC_URL:""}).REACT_APP_SET_AUTH&&r.a.createElement("form",{onSubmit:function(e){e.preventDefault(),v()}},r.a.createElement(Ft.a,{container:!0,alignItems:"center",direction:"column"},r.a.createElement(ue.a,{id:"input-passcode",label:"Passcode",onChange:function(e){return E(e.target.value)},type:"password"}),r.a.createElement("div",null,b&&r.a.createElement(He.a,{variant:"caption",className:e.errorMessage},r.a.createElement(it.a,null),b.message)),r.a.createElement(oe.a,{variant:"contained",className:e.button,type:"submit",disabled:!f.length},"Submit")))))):null}),null)),r.a.createElement(Fe.a,{to:"/"}))))),document.getElementById("root"))}},[[183,1,2]]]);
//# sourceMappingURL=main.11310554.chunk.js.map